listen:
  host: 127.0.0.1
  port: 3000

logLevel: info
WEBFORM_ALLOWED_ORIGINS:
  - https://tashi.namche.ai

agents:
  tashi:
    url: https://tashi.silverside-mermaid.ts.net
    openclawHooksToken: Bearer <OPENCLAW_HOOKS_TOKEN_TASHI>

apps:
  krisp:
    incomingAuthorization: Bearer <KRISP_AUTHORIZATION>
    targetAgent: tashi
    # OpenClaw hook parameters (hardwired in code, documented here for reference):
    # agentId: main              — which OpenClaw agent session to target
    # sessionKey: hook:notetaker:krisp — routes into the Krisp notetaker hook session
    # wakeMode: next-heartbeat   — processed at the next heartbeat, not urgently
    # deliver: false             — queued silently; no immediate notification pushed

  # gmail is optional — omit to disable the route
  # Receives raw Pub/Sub push from Google, verifies OIDC JWT, forwards to gog gmail watch serve
  gmail:
    oidcEmail: <SERVICE_ACCOUNT>@<PROJECT>.iam.gserviceaccount.com  # expected GCP SA in OIDC JWT
    targetAgent: tashi
    forwardUrl: https://tashi.silverside-mermaid.ts.net/gmail-pubsub?token=<GOG_SERVE_TOKEN>

  # gmail-hook is optional — omit to disable the route
  # Receives gog-processed payload (messages + labels), filters by Label_15, forwards to OpenClaw
  # Set gog gmail watch serve --hook-url to https://api.namche.ai/v1/webhooks/agents/tashi/gmail-hook
  # and --hook-token to the same value as hookToken below.
  gmail-hook:
    targetAgent: tashi
    hookToken: <SHARED_TOKEN>                              # shared secret, set in gog --hook-token
    hookUrl: https://tashi.silverside-mermaid.ts.net/hooks/gmail  # OpenClaw hooks endpoint via Tailscale
